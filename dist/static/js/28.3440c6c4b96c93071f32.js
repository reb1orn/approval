webpackJsonp([28,47],{483:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(19),o=s(i),n=a(8),r=a(171),d=s(r);t.default={components:{ZiksangCountDown:d.default},name:"set",data:function(){return{start:!1,telphone:"",promptTitle:!1,IsborderMa:!1,captcha2:!1,captcha1:!1,token:"",code:"",userName:"",timeTrue:!1,time:60}},created:function(){var e=this,t=this;if(void 0!=sessionStorage.getItem("orgId")){this.userName=sessionStorage.getItem("userName")||"暂无",this.telphone=sessionStorage.getItem("phoneVal")||"暂无";var t=this,a=sessionStorage.getItem("phoneVal");t.telPhone=a,t.gettoken({}).then(function(t){"000000"==t.code?e.token=t.data.token:e.$message({type:"info",message:t.msg})}).catch(function(t){"188888"==JSON.parse(t.bodyText).code?(e.$message({type:"info",message:JSON.parse(t.bodyText).msg}),e.$router.push({path:"/login"})):e.$message({type:"info",message:"服务器错误!"})})}},watch:{},methods:(0,o.default)({sendCodeClick:function(e){var t=this,a=this;this.valiorPhone()?0==this.timeTrue?(a.timeTrue=!0,this.getcodesms({token:this.token,to:this.telPhone}).then(function(e){if("000000"==e.code){a.time=60;var s=setInterval(function(){a.time--,0==a.time&&(clearInterval(s),a.timeTrue=!1)},1e3);t.start=!0}else t.$message({type:"info",message:e.msg}),t.start=!1,a.timeTrue=!1}).catch(function(e){t.start=!1,t.timeTrue=!1,"188888"==JSON.parse(e.bodyText).code?(t.$message({type:"info",message:JSON.parse(e.bodyText).msg}),t.$router.push({path:"/login"})):t.$message({type:"info",message:"服务器错误!"})})):this.$message({type:"info",message:"验证码已经发送,请查看手机!"}):this.valiorPhone()||this.valiorPhone()},inputFocus:function(e){this.IsborderMa=!1,e.srcElement.style.borderColor="#E7744A",this.promptTitle=!1},inputOut:function(e){e.srcElement.style.borderColor="rgba(0,0,0,0.1)"},valiorPhone:function(){var e=!0,t=/^1[34578]\d{9}$/,a=/^\s*$/g;return a.test(this.telPhone)?(this.telVel1=!0,e=!1):t.test(this.telPhone)||(this.telVel=!0,e=!1),e},valiorMessage:function(){var e=!0,t=/^\d{4}$/,a=/^\s*$/g;return a.test(this.code)?(e=!1,this.captcha2=!0):(this.captcha2=!1,t.test(this.code)?this.captcha1=!1:(e=!1,this.captcha1=!0)),e},masterNext:function(){var e=this;this.valiorMessage()?this.getadminvalidate({oid:sessionStorage.getItem("orgId"),uid:sessionStorage.getItem("userId"),mobile:this.telphone,codeToken:this.token,code:this.code}).then(function(t){if("000000"==t.code)if(1==t.data){e.$message({type:"success",message:"验证成功！"});var a="/home/set/changMasterNext";e.$router.push({path:a})}else e.$message({type:"info",message:t.msg});else e.$message({type:"info",message:t.msg})}).catch(function(t){"188888"==JSON.parse(t.bodyText).code?(e.$message({type:"info",message:JSON.parse(t.bodyText).msg}),e.$router.push({path:"/login"})):e.$message({type:"info",message:"服务器错误!"})}):this.valiorMessage()||this.valiorMessage()}},(0,n.mapActions)(["changMasterNext","getadminvalidate","getcodesms","gettoken"]))}},776:function(e,t,a){t=e.exports=a(6)(),t.push([e.id,".masterTop[data-v-6454db5e]{height:auto;padding-top:20px;padding-bottom:12px;color:#303030;font-size:14px}.masterBot[data-v-6454db5e],.masterTop[data-v-6454db5e]{width:calc(100%-88px);border-bottom:1px solid rgba(0,0,0,.15);margin-left:44px;margin-right:44px}.masterBot[data-v-6454db5e]{height:251px}.masterBot ul li[data-v-6454db5e]{float:left}.authCode[data-v-6454db5e],.BindingAccount[data-v-6454db5e],.telPhone[data-v-6454db5e]{width:100%;height:45px;color:#303030;font-size:14px}.telPhone input[data-v-6454db5e]{width:240px;height:36px;border:1px solid rgba(0,0,0,.1);border-radius:4px;margin-top:-10px;padding-left:5px}.textCode[data-v-6454db5e]{margin-top:-8px;margin-left:70px}.authCode input[data-v-6454db5e]{width:240px;height:36px;border:1px solid rgba(0,0,0,.1);border-radius:4px;margin-top:-10px;padding-left:5px}#interval[data-v-6454db5e]{margin-left:12px}#asterisk[data-v-6454db5e]{color:#e7744a;font-size:14px;margin-top:-4px}.BindingAccount[data-v-6454db5e]{margin-top:20px;padding-left:70px}.authCode[data-v-6454db5e],.telPhone[data-v-6454db5e]{margin-top:20px;padding-left:141px}.masterNext[data-v-6454db5e]{width:100px;height:34px;background-color:#e7744a;border-radius:4px;margin-top:30px;text-align:center;line-height:34px;margin-left:312px}.masterNext a[data-v-6454db5e]{display:inline-block;width:100%;height:100%;text-decoration:none;color:#fff;font-size:16px}#captcha[data-v-6454db5e],#prompt[data-v-6454db5e]{color:#ff5f57;font-size:12px;margin-top:6px}.borderMa[data-v-6454db5e]{border:1px solid #ff5f57!important}",""])},1142:function(e,t,a){var s=a(776);"string"==typeof s&&(s=[[e.id,s,""]]);a(7)(s,{});s.locals&&(e.exports=s.locals)},1261:function(e,t,a){a(1142);var s=a(5)(a(483),a(1298),"data-v-6454db5e",null);e.exports=s.exports},1298:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set",staticStyle:{height:"100%"}},[a("div",{staticClass:"masterTop"},[e._v("\n        更换主管理账号，需要验证当前主管理账号的身份\n    ")]),e._v(" "),a("div",{staticClass:"masterBot"},[a("div",{staticClass:"BindingAccount"},[a("ul",[a("li",[e._v("当前绑定伯通账号")]),e._v(" "),a("li",{attrs:{id:"asterisk"}},[e._v("*")]),e._v(" "),a("li",[e._v("：")]),e._v(" "),a("li",{attrs:{id:"interval"}},[e._v(e._s(e.userName))])])]),e._v(" "),a("div",{staticClass:"telPhone"},[a("ul",[a("li",[e._v("手机号")]),e._v(" "),a("li",{attrs:{id:"asterisk"}},[e._v("*")]),e._v(" "),a("li",[e._v("：")]),e._v(" "),a("li",{attrs:{id:"interval"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.telphone,expression:"telphone"}],class:{borderMa:e.IsborderMa},attrs:{type:"text",placeholder:"请输入手机号",disabled:"",onKeypress:"javascript:if(event.keyCode == 32)event.returnValue = false;"},domProps:{value:e.telphone},on:{focus:e.inputFocus,blur:e.inputOut,input:function(t){t.target.composing||(e.telphone=t.target.value)}}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.promptTitle,expression:"promptTitle"}],attrs:{id:"prompt"}},[e._v("\n                        请输入正确的手机号码\n                    ")])]),e._v(" "),a("li",{staticClass:"textCode"},[a("ziksang-count-down",{attrs:{start:e.start},on:{countDown:function(t){e.start=!1}},nativeOn:{click:function(t){e.sendCodeClick(t)}}})],1)])]),e._v(" "),a("div",{staticClass:"authCode"},[a("ul",[a("li",[e._v("验证码")]),e._v(" "),a("li",{attrs:{id:"asterisk"}},[e._v("*")]),e._v(" "),a("li",[e._v("：")]),e._v(" "),a("li",{attrs:{id:"interval"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],class:{borderMa:e.IsborderMa},attrs:{type:"text",placeholder:"请填写验证码",minlength:"4",maxlength:"4"},domProps:{value:e.code},on:{focus:e.inputFocus,blur:e.inputOut,input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.captcha1,expression:"captcha1"}],attrs:{id:"captcha"}},[e._v("短信验证码不正确，请重新输入")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.captcha2,expression:"captcha2"}],attrs:{id:"captcha"}},[e._v("短信验证码不能为空")])])])]),e._v(" "),a("div",{staticClass:"masterNext"},[a("a",{attrs:{href:"javascript:;"},on:{click:e.masterNext}},[e._v("下一步")])])])])},staticRenderFns:[]}}});